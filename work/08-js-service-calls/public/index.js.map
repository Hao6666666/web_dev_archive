{"version":3,"file":"index.js","mappings":"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","sources":["webpack://08-js-service-calls/./src/controller.js","webpack://08-js-service-calls/./src/error.js","webpack://08-js-service-calls/./src/page.js","webpack://08-js-service-calls/./src/services.js","webpack://08-js-service-calls/./src/userDB.js","webpack://08-js-service-calls/./users.js","webpack://08-js-service-calls/webpack/bootstrap","webpack://08-js-service-calls/./src/index.js"],"sourcesContent":["const page = require(\"./page.js\");\nconst service = require(\"./services.js\");\n\nconst controller = {\n  setUpController() {\n    const appEl = document.querySelector(\".app\");\n    appEl.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      const classname = e.target.className;\n      if (classname === \"login-btn\") {\n        const username = document.querySelector(\".user-input\").value;\n        service\n          .fetchLogin(username)\n          .then(() => service.fetchSession())\n          .then(() => service.fetchGetWord())\n          .then(() => page.render(username));\n      } else if (classname === \"logout-btn\") {\n        service.fetchLogout().then(() => {\n          page.render();\n        });\n      } else if (classname === \"word-btn\") {\n        const word = document.querySelector(\".word-input\").value;\n        const name = document.querySelector(\".word-input\").name;\n        service.fetchPutWord(word).then(() => page.render(name));\n      } else {\n        return;\n      }\n    });\n  },\n};\n\nmodule.exports = controller;\n","const error = {\n  render(err) {\n    const errorEL = document.querySelector(\".login-status\");\n    if (err) {\n      errorEL.innerHTML = err;\n    } else {\n      errorEL.innerHTML = \"\";\n    }\n  },\n};\n\nmodule.exports = error;\n","const userDB = require(\"./userDB\");\nconst users = require(\"../users\");\n\nconst page = {\n  loginPage(username) {\n    const loginEL = document.querySelector(\".login-page\");\n\n    if (username in userDB) {\n      loginEL.innerHTML = \"\";\n    } else {\n      loginEL.innerHTML = `\n      <h1>Store A Word</h1>\n      <form action=\"\">\n          <label>Username: \n              <input type=\"text\" name=\"username\" class=\"user-input\">\n          </label>\n          <br>\n          <button type=\"submit\" class=\"login-btn\">Login</button>    \n      </form>\n        `;\n    }\n  },\n\n  gamePage(username) {\n    const errorEL = document.querySelector(\".login-status\");\n    errorEL.innerHTML = \":-)\";\n\n    const gemaEL = document.querySelector(\".game-page\");\n    if (username in userDB) {\n      const wordHTML = userDB[username]\n        ? `<h1>Hi ${username} </h1> <p class=\"state-show\">Your word is: ${userDB[username]}</p>`\n        : `<h1>Hi ${username} </h1> <p class=\"state-empty\">NO WORD. PLEASE SEND A WORD.</p>`;\n      gemaEL.innerHTML = `\n        ${wordHTML}\n        <form action=\"\">\n            <label>\n                Store word: <input type=\"text\" class=\"word-input\" name=${username}></input>\n            </label>\n            <button class='word-btn' type=\"submit\" >Submit</button>\n            <button class='logout-btn' type=\"submit\">Logout</button>\n        </form>\n       `;\n    } else {\n      gemaEL.innerHTML = \"\";\n    }\n  },\n\n  render(username) {\n    page.loginPage(username);\n    page.gamePage(username);\n  },\n};\n\nmodule.exports = page;\n","const page = require(\"./page.js\");\nconst userDB = require(\"./userDB\");\nconst error = require(\"./error.js\");\n\nconst service = {\n  fetchLogin(username) {\n    return fetch(\"/api/session/\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      body: JSON.stringify({ username }),\n    })\n      .catch((err) => Promise.reject({ error: \"network-error\" }))\n      .then((response) => {\n        if (!response.ok) {\n          return response.json().then((err) => {\n            error.render(err.error);\n            return Promise.reject(err);\n          });\n        }\n        if (!userDB[username]) {\n          userDB[username] = \"\";\n        }\n        return response.json();\n      });\n  },\n\n  fetchLogout() {\n    return fetch(\"/api/session/\", {\n      method: \"DELETE\",\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n    })\n      .catch((err) => Promise.reject({ error: \"network-error\" }))\n      .then((response) => {\n        return response.json();\n      });\n  },\n\n  fetchSession() {\n    return fetch(\"/api/session\")\n      .catch((err) => {\n        return Promise.reject(err);\n      })\n      .then((response) => {\n        if (!response.ok) {\n          return response.json().then((err) => {\n            error.render(err.error);\n            return Promise.reject(err);\n          });\n        }\n        return response.json();\n      })\n      .then(() => {\n        return service.fetchGetWord();\n      })\n      .then((response) => {\n        userDB[response.username] = response.storedWord;\n        page.render(response.username);\n      });\n  },\n\n  fetchGetWord() {\n    return fetch(\"/api/word\", {\n      method: \"GET\",\n    })\n      .catch((err) => Promise.reject({ error: \"network-error\" }))\n      .then((response) => {\n        if (!response.ok) {\n          return response.json().then((err) => Promise.reject(err));\n        }\n        return response.json();\n      });\n  },\n\n  fetchPutWord(word) {\n    return (\n      fetch(\"/api/word\", {\n        method: \"PUT\",\n        headers: {\n          \"content-type\": \"application/json\",\n        },\n        body: JSON.stringify({ word }),\n      })\n        .catch((err) => Promise.reject({ error: \"network-error\" }))\n        .then((response) => {\n          if (!response.ok) {\n            return response.json().then((err) => {\n              error.render(err.error);\n              return Promise.reject(err);\n            });\n          }\n          return response.json();\n        })\n        \n        .then((response) => {\n          userDB[response.username] = response.storedWord;\n        })\n    );\n  },\n};\n\nmodule.exports = service;\n","const userDB = {};\n\nmodule.exports = userDB;\n","// Odd naming on \"wordFor\"?\n// This is chosen to make the use of it read more naturally:\n// `wordFor[username] = word;`\n//\n// Some teams will embrace that, others will want a more rigidly consistent style\n\nconst wordFor = {};\n\n// We could have some functions to abstract the storage of words\n// Similar to how sessions.js never exports the sessions object\n\n// I've exported the wordFor object instead because our use is so simple\n// - different people in the industry have different views on when is the\n// best time to put a layer of abstraction around data\n\nfunction isValidUsername(username) {\n  let isValid = true;\n  isValid = isValid && username.trim();\n  isValid = isValid && username.match(/^[A-Za-z0-9_]+$/);\n  return isValid;\n}\n\nfunction isValidWord(word) {\n  let isValid = true;\n  isValid = isValid && word.match(/^[A-Za-z]*$/);\n  return isValid;\n}\n\nmodule.exports = {\n  isValidUsername,\n  isValidWord,\n  wordFor,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const page = require(\"./page.js\");\nconst controller = require(\"./controller.js\");\nconst service = require(\"./services.js\");\n\ncontroller.setUpController();\nservice.fetchSession();\npage.render();\n"],"names":["page","require","service","controller","setUpController","appEl","document","querySelector","addEventListener","e","preventDefault","classname","target","className","username","value","fetchLogin","then","fetchSession","fetchGetWord","render","fetchLogout","word","name","fetchPutWord","module","exports","error","err","errorEL","innerHTML","userDB","users","loginPage","loginEL","gamePage","gemaEL","wordHTML","concat","fetch","method","headers","body","JSON","stringify","Promise","reject","response","ok","json","storedWord","wordFor","isValidUsername","isValid","trim","match","isValidWord"],"sourceRoot":""}